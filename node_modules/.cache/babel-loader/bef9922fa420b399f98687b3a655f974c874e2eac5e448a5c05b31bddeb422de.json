{"ast":null,"code":"var util = require('../util');\nvar builder = require('xmlbuilder');\nfunction XmlBuilder() {}\nXmlBuilder.prototype.toXML = function (params, shape, rootElement, noEmpty) {\n  var xml = builder.create(rootElement);\n  applyNamespaces(xml, shape);\n  serialize(xml, params, shape);\n  return xml.children.length > 0 || noEmpty ? xml.root().toString() : '';\n};\nfunction serialize(xml, value, shape) {\n  switch (shape.type) {\n    case 'structure':\n      return serializeStructure(xml, value, shape);\n    case 'map':\n      return serializeMap(xml, value, shape);\n    case 'list':\n      return serializeList(xml, value, shape);\n    default:\n      return serializeScalar(xml, value, shape);\n  }\n}\nfunction serializeStructure(xml, params, shape) {\n  util.arrayEach(shape.memberNames, function (memberName) {\n    var memberShape = shape.members[memberName];\n    if (memberShape.location !== 'body') return;\n    var value = params[memberName];\n    var name = memberShape.name;\n    if (value !== undefined && value !== null) {\n      if (memberShape.isXmlAttribute) {\n        xml.att(name, value);\n      } else if (memberShape.flattened) {\n        serialize(xml, value, memberShape);\n      } else {\n        var element = xml.ele(name);\n        applyNamespaces(element, memberShape);\n        serialize(element, value, memberShape);\n      }\n    }\n  });\n}\nfunction serializeMap(xml, map, shape) {\n  var xmlKey = shape.key.name || 'key';\n  var xmlValue = shape.value.name || 'value';\n  util.each(map, function (key, value) {\n    var entry = xml.ele(shape.flattened ? shape.name : 'entry');\n    serialize(entry.ele(xmlKey), key, shape.key);\n    serialize(entry.ele(xmlValue), value, shape.value);\n  });\n}\nfunction serializeList(xml, list, shape) {\n  if (shape.flattened) {\n    util.arrayEach(list, function (value) {\n      var name = shape.member.name || shape.name;\n      var element = xml.ele(name);\n      serialize(element, value, shape.member);\n    });\n  } else {\n    util.arrayEach(list, function (value) {\n      var name = shape.member.name || 'member';\n      var element = xml.ele(name);\n      serialize(element, value, shape.member);\n    });\n  }\n}\nfunction serializeScalar(xml, value, shape) {\n  xml.txt(shape.toWireFormat(value));\n}\nfunction applyNamespaces(xml, shape) {\n  var uri,\n    prefix = 'xmlns';\n  if (shape.xmlNamespaceUri) {\n    uri = shape.xmlNamespaceUri;\n    if (shape.xmlNamespacePrefix) prefix += ':' + shape.xmlNamespacePrefix;\n  } else if (xml.isRoot && shape.api.xmlNamespaceUri) {\n    uri = shape.api.xmlNamespaceUri;\n  }\n  if (uri) xml.att(prefix, uri);\n}\nmodule.exports = XmlBuilder;","map":{"version":3,"names":["util","require","builder","XmlBuilder","prototype","toXML","params","shape","rootElement","noEmpty","xml","create","applyNamespaces","serialize","children","length","root","toString","value","type","serializeStructure","serializeMap","serializeList","serializeScalar","arrayEach","memberNames","memberName","memberShape","members","location","name","undefined","isXmlAttribute","att","flattened","element","ele","map","xmlKey","key","xmlValue","each","entry","list","member","txt","toWireFormat","uri","prefix","xmlNamespaceUri","xmlNamespacePrefix","isRoot","api","module","exports"],"sources":["/Users/luminosity/Desktop/Fovus/node_modules/aws-sdk/lib/xml/builder.js"],"sourcesContent":["var util = require('../util');\nvar builder = require('xmlbuilder');\n\nfunction XmlBuilder() { }\n\nXmlBuilder.prototype.toXML = function(params, shape, rootElement, noEmpty) {\n  var xml = builder.create(rootElement);\n  applyNamespaces(xml, shape);\n  serialize(xml, params, shape);\n  return xml.children.length > 0 || noEmpty ? xml.root().toString() : '';\n};\n\nfunction serialize(xml, value, shape) {\n  switch (shape.type) {\n    case 'structure': return serializeStructure(xml, value, shape);\n    case 'map': return serializeMap(xml, value, shape);\n    case 'list': return serializeList(xml, value, shape);\n    default: return serializeScalar(xml, value, shape);\n  }\n}\n\nfunction serializeStructure(xml, params, shape) {\n  util.arrayEach(shape.memberNames, function(memberName) {\n    var memberShape = shape.members[memberName];\n    if (memberShape.location !== 'body') return;\n\n    var value = params[memberName];\n    var name = memberShape.name;\n    if (value !== undefined && value !== null) {\n      if (memberShape.isXmlAttribute) {\n        xml.att(name, value);\n      } else if (memberShape.flattened) {\n        serialize(xml, value, memberShape);\n      } else {\n        var element = xml.ele(name);\n        applyNamespaces(element, memberShape);\n        serialize(element, value, memberShape);\n      }\n    }\n  });\n}\n\nfunction serializeMap(xml, map, shape) {\n  var xmlKey = shape.key.name || 'key';\n  var xmlValue = shape.value.name || 'value';\n\n  util.each(map, function(key, value) {\n    var entry = xml.ele(shape.flattened ? shape.name : 'entry');\n    serialize(entry.ele(xmlKey), key, shape.key);\n    serialize(entry.ele(xmlValue), value, shape.value);\n  });\n}\n\nfunction serializeList(xml, list, shape) {\n  if (shape.flattened) {\n    util.arrayEach(list, function(value) {\n      var name = shape.member.name || shape.name;\n      var element = xml.ele(name);\n      serialize(element, value, shape.member);\n    });\n  } else {\n    util.arrayEach(list, function(value) {\n      var name = shape.member.name || 'member';\n      var element = xml.ele(name);\n      serialize(element, value, shape.member);\n    });\n  }\n}\n\nfunction serializeScalar(xml, value, shape) {\n  xml.txt(shape.toWireFormat(value));\n}\n\nfunction applyNamespaces(xml, shape) {\n  var uri, prefix = 'xmlns';\n  if (shape.xmlNamespaceUri) {\n    uri = shape.xmlNamespaceUri;\n    if (shape.xmlNamespacePrefix) prefix += ':' + shape.xmlNamespacePrefix;\n  } else if (xml.isRoot && shape.api.xmlNamespaceUri) {\n    uri = shape.api.xmlNamespaceUri;\n  }\n\n  if (uri) xml.att(prefix, uri);\n}\n\nmodule.exports = XmlBuilder;\n"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}