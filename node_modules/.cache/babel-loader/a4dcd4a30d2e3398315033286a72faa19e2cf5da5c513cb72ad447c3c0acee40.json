{"ast":null,"code":"var Buffer = require('buffer').Buffer;\nvar sha = require('./sha');\nvar sha256 = require('./sha256');\nvar rng = require('./rng');\nvar md5 = require('./md5');\nvar algorithms = {\n  sha1: sha,\n  sha256: sha256,\n  md5: md5\n};\nvar blocksize = 64;\nvar zeroBuffer = new Buffer(blocksize);\nzeroBuffer.fill(0);\nfunction hmac(fn, key, data) {\n  if (!Buffer.isBuffer(key)) key = new Buffer(key);\n  if (!Buffer.isBuffer(data)) data = new Buffer(data);\n  if (key.length > blocksize) {\n    key = fn(key);\n  } else if (key.length < blocksize) {\n    key = Buffer.concat([key, zeroBuffer], blocksize);\n  }\n  var ipad = new Buffer(blocksize),\n    opad = new Buffer(blocksize);\n  for (var i = 0; i < blocksize; i++) {\n    ipad[i] = key[i] ^ 0x36;\n    opad[i] = key[i] ^ 0x5C;\n  }\n  var hash = fn(Buffer.concat([ipad, data]));\n  return fn(Buffer.concat([opad, hash]));\n}\nfunction hash(alg, key) {\n  alg = alg || 'sha1';\n  var fn = algorithms[alg];\n  var bufs = [];\n  var length = 0;\n  if (!fn) error('algorithm:', alg, 'is not yet supported');\n  return {\n    update: function (data) {\n      if (!Buffer.isBuffer(data)) data = new Buffer(data);\n      bufs.push(data);\n      length += data.length;\n      return this;\n    },\n    digest: function (enc) {\n      var buf = Buffer.concat(bufs);\n      var r = key ? hmac(fn, key, buf) : fn(buf);\n      bufs = null;\n      return enc ? r.toString(enc) : r;\n    }\n  };\n}\nfunction error() {\n  var m = [].slice.call(arguments).join(' ');\n  throw new Error([m, 'we accept pull requests', 'http://github.com/dominictarr/crypto-browserify'].join('\\n'));\n}\nexports.createHash = function (alg) {\n  return hash(alg);\n};\nexports.createHmac = function (alg, key) {\n  return hash(alg, key);\n};\nexports.randomBytes = function (size, callback) {\n  if (callback && callback.call) {\n    try {\n      callback.call(this, undefined, new Buffer(rng(size)));\n    } catch (err) {\n      callback(err);\n    }\n  } else {\n    return new Buffer(rng(size));\n  }\n};\nfunction each(a, f) {\n  for (var i in a) f(a[i], i);\n}\n\n// the least I can do is make error messages for the rest of the node.js/crypto api.\neach(['createCredentials', 'createCipher', 'createCipheriv', 'createDecipher', 'createDecipheriv', 'createSign', 'createVerify', 'createDiffieHellman', 'pbkdf2'], function (name) {\n  exports[name] = function () {\n    error('sorry,', name, 'is not implemented yet');\n  };\n});","map":{"version":3,"names":["Buffer","require","sha","sha256","rng","md5","algorithms","sha1","blocksize","zeroBuffer","fill","hmac","fn","key","data","isBuffer","length","concat","ipad","opad","i","hash","alg","bufs","error","update","push","digest","enc","buf","r","toString","m","slice","call","arguments","join","Error","exports","createHash","createHmac","randomBytes","size","callback","undefined","err","each","a","f","name"],"sources":["/Users/luminosity/Desktop/Fovus/node_modules/crypto-browserify/index.js"],"sourcesContent":["var Buffer = require('buffer').Buffer\nvar sha = require('./sha')\nvar sha256 = require('./sha256')\nvar rng = require('./rng')\nvar md5 = require('./md5')\n\nvar algorithms = {\n  sha1: sha,\n  sha256: sha256,\n  md5: md5\n}\n\nvar blocksize = 64\nvar zeroBuffer = new Buffer(blocksize); zeroBuffer.fill(0)\nfunction hmac(fn, key, data) {\n  if(!Buffer.isBuffer(key)) key = new Buffer(key)\n  if(!Buffer.isBuffer(data)) data = new Buffer(data)\n\n  if(key.length > blocksize) {\n    key = fn(key)\n  } else if(key.length < blocksize) {\n    key = Buffer.concat([key, zeroBuffer], blocksize)\n  }\n\n  var ipad = new Buffer(blocksize), opad = new Buffer(blocksize)\n  for(var i = 0; i < blocksize; i++) {\n    ipad[i] = key[i] ^ 0x36\n    opad[i] = key[i] ^ 0x5C\n  }\n\n  var hash = fn(Buffer.concat([ipad, data]))\n  return fn(Buffer.concat([opad, hash]))\n}\n\nfunction hash(alg, key) {\n  alg = alg || 'sha1'\n  var fn = algorithms[alg]\n  var bufs = []\n  var length = 0\n  if(!fn) error('algorithm:', alg, 'is not yet supported')\n  return {\n    update: function (data) {\n      if(!Buffer.isBuffer(data)) data = new Buffer(data)\n        \n      bufs.push(data)\n      length += data.length\n      return this\n    },\n    digest: function (enc) {\n      var buf = Buffer.concat(bufs)\n      var r = key ? hmac(fn, key, buf) : fn(buf)\n      bufs = null\n      return enc ? r.toString(enc) : r\n    }\n  }\n}\n\nfunction error () {\n  var m = [].slice.call(arguments).join(' ')\n  throw new Error([\n    m,\n    'we accept pull requests',\n    'http://github.com/dominictarr/crypto-browserify'\n    ].join('\\n'))\n}\n\nexports.createHash = function (alg) { return hash(alg) }\nexports.createHmac = function (alg, key) { return hash(alg, key) }\nexports.randomBytes = function(size, callback) {\n  if (callback && callback.call) {\n    try {\n      callback.call(this, undefined, new Buffer(rng(size)))\n    } catch (err) { callback(err) }\n  } else {\n    return new Buffer(rng(size))\n  }\n}\n\nfunction each(a, f) {\n  for(var i in a)\n    f(a[i], i)\n}\n\n// the least I can do is make error messages for the rest of the node.js/crypto api.\neach(['createCredentials'\n, 'createCipher'\n, 'createCipheriv'\n, 'createDecipher'\n, 'createDecipheriv'\n, 'createSign'\n, 'createVerify'\n, 'createDiffieHellman'\n, 'pbkdf2'], function (name) {\n  exports[name] = function () {\n    error('sorry,', name, 'is not implemented yet')\n  }\n})\n"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}